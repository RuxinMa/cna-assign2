=== TEST: test10_long_term ===
Number of messages: 50
Loss probability: 0.1
Corruption probability: 0.1
Direction (0=A->B, 1=A<-B, 2=both): 0
Average message interval: 10.0
Trace level: 1
===============================

-----  Stop and Wait Network Simulator Version 1.1 -------- 

Enter the number of messages to simulate: Enter  packet loss probability [enter 0.0 for no loss]:Enter packet corruption probability [0.0 for no corruption]:If you want loss or corruption to only occur in one direction, choose the direction: 0 A->B, 1 A<-B, 2 A<->B (both directions) :Enter average time between messages from sender's layer5 [ > 0.0]:Enter TRACE:Sending packet 0 to layer 3
----B: packet 0 is not corrupted
----B: packet 0 accepted and buffered
----B: delivered packet to layer 5, window moves to 1
----A: uncorrupted ACK 0 is received
----A: ACK 0 is new, marked as ACKED
----A: Window slides to 1
Warning: unable to cancel your timer. It wasn't running.
Sending packet 1 to layer 3
Sending packet 2 to layer 3
----B: packet 1 is not corrupted
----B: packet 1 accepted and buffered
----B: delivered packet to layer 5, window moves to 2
Sending packet 3 to layer 3
Sending packet 4 to layer 3
          TOLAYER3: packet being lost
----B: packet 2 is not corrupted
----B: packet 2 accepted and buffered
----B: delivered packet to layer 5, window moves to 3
----A: uncorrupted ACK 1 is received
----A: ACK 1 is new, marked as ACKED
----A: Window slides to 2
Warning: unable to cancel your timer. It wasn't running.
----B: packet 3 is not corrupted
----B: packet 3 accepted and buffered
----B: delivered packet to layer 5, window moves to 4
----A: uncorrupted ACK 2 is received
----A: ACK 2 is new, marked as ACKED
----A: Window slides to 3
Sending packet 5 to layer 3
Sending packet 6 to layer 3
          TOLAYER3: packet being lost
----A: uncorrupted ACK 3 is received
----A: ACK 3 is new, marked as ACKED
----A: Window slides to 4
----B: packet 5 is not corrupted
----B: packet 5 accepted and buffered
----A: uncorrupted ACK 5 is received
----A: ACK 5 is new, marked as ACKED
Sending packet 7 to layer 3
----B: packet 7 is not corrupted
----B: packet 7 accepted and buffered
----A: uncorrupted ACK 7 is received
----A: ACK 7 is new, marked as ACKED
Sending packet 8 to layer 3
----B: packet 8 is not corrupted
----B: packet 8 accepted and buffered
----A: uncorrupted ACK 8 is received
----A: ACK 8 is new, marked as ACKED
Sending packet 9 to layer 3
----A: New message arrives, send window is full
----A: New message arrives, send window is full
----B: packet 9 is not corrupted
----B: packet 9 accepted and buffered
----A: time out,resend packets!
---A: resending packet 4 (retransmission 1)
          TOLAYER3: packet being lost
---A: resending packet 6 (retransmission 1)
          TOLAYER3: packet being corrupted
---A: resending packet 9 (retransmission 1)
----B: packet 999999 is corrupted
----A: New message arrives, send window is full
----A: uncorrupted ACK 9 is received
----A: ACK 9 is new, marked as ACKED
----B: packet 9 is not corrupted
----B: duplicate packet 9 received, already buffered
----A: uncorrupted ACK 3 is received
----A: duplicate ACK received, do nothing!
----A: uncorrupted ACK 9 is received
----A: duplicate ACK received, do nothing!
----A: New message arrives, send window is full
----A: time out,resend packets!
---A: resending packet 4 (retransmission 2)
---A: resending packet 6 (retransmission 2)
----B: packet 4 is not corrupted
----B: packet 4 accepted and buffered
----B: delivered packet to layer 5, window moves to 5
----B: delivered packet to layer 5, window moves to 6
----B: packet 6 is not corrupted
----B: packet 6 accepted and buffered
----B: delivered packet to layer 5, window moves to 7
----B: delivered packet to layer 5, window moves to 8
----B: delivered packet to layer 5, window moves to 9
----B: delivered packet to layer 5, window moves to 10
----A: uncorrupted ACK 4 is received
----A: ACK 4 is new, marked as ACKED
----A: Window slides to 5
----A: Window slides to 6
Sending packet 10 to layer 3
----A: uncorrupted ACK 6 is received
----A: ACK 6 is new, marked as ACKED
----A: Window slides to 7
----A: Window slides to 8
----A: Window slides to 9
----A: Window slides to 10
----B: packet 10 is not corrupted
----B: packet 10 accepted and buffered
----B: delivered packet to layer 5, window moves to 11
----A: uncorrupted ACK 10 is received
----A: ACK 10 is new, marked as ACKED
----A: Window slides to 11
Sending packet 11 to layer 3
          TOLAYER3: packet being corrupted
----B: packet 999999 is corrupted
----A: uncorrupted ACK 10 is received
----A: duplicate ACK received, do nothing!
Sending packet 0 to layer 3
----B: packet 0 is not corrupted
----B: packet 0 accepted and buffered
----A: uncorrupted ACK 0 is received
----A: ACK 0 is new, marked as ACKED
Warning: unable to cancel your timer. It wasn't running.
Sending packet 1 to layer 3
Sending packet 2 to layer 3
          TOLAYER3: packet being corrupted
----B: packet 1 is not corrupted
----B: packet 1 accepted and buffered
Sending packet 3 to layer 3
          TOLAYER3: packet being lost
----A: time out,resend packets!
---A: resending packet 11 (retransmission 1)
          TOLAYER3: packet being corrupted
---A: resending packet 1 (retransmission 1)
---A: resending packet 2 (retransmission 1)
---A: resending packet 3 (retransmission 1)
----B: packet 2 is corrupted
----A: uncorrupted ACK 1 is received
----A: ACK 1 is new, marked as ACKED
----B: packet 11 is corrupted
----A: uncorrupted ACK 10 is received
----A: duplicate ACK received, do nothing!
----A: uncorrupted ACK 10 is received
----A: duplicate ACK received, do nothing!
Sending packet 4 to layer 3
----B: packet 1 is not corrupted
----B: duplicate packet 1 received, already buffered
----A: time out,resend packets!
---A: resending packet 11 (retransmission 2)
---A: resending packet 2 (retransmission 2)
---A: resending packet 3 (retransmission 2)
---A: resending packet 4 (retransmission 1)
----B: packet 2 is not corrupted
----B: packet 2 accepted and buffered
----A: uncorrupted ACK 1 is received
----A: duplicate ACK received, do nothing!
----A: uncorrupted ACK 2 is received
----A: ACK 2 is new, marked as ACKED
----A: New message arrives, send window is full
----B: packet 3 is not corrupted
----B: packet 3 accepted and buffered
----A: New message arrives, send window is full
----A: New message arrives, send window is full
----A: uncorrupted ACK 3 is received
----A: ACK 3 is new, marked as ACKED
----B: packet 4 is not corrupted
----B: packet 4 accepted and buffered
----A: New message arrives, send window is full
----B: packet 11 is not corrupted
----B: packet 11 accepted and buffered
----B: delivered packet to layer 5, window moves to 0
----B: delivered packet to layer 5, window moves to 1
----B: delivered packet to layer 5, window moves to 2
----B: delivered packet to layer 5, window moves to 3
----B: delivered packet to layer 5, window moves to 4
----B: delivered packet to layer 5, window moves to 5
----A: uncorrupted ACK 4 is received
----A: ACK 4 is new, marked as ACKED
----A: uncorrupted ACK 11 is received
----A: ACK 11 is new, marked as ACKED
----A: Window slides to 0
----A: Window slides to 1
----A: Window slides to 2
----A: Window slides to 3
----A: Window slides to 4
----A: Window slides to 5
----B: packet 2 is not corrupted
----B: packet 2 outside window
----B: duplicate packet, sending ACK 2
----B: packet 3 is not corrupted
----B: packet 3 outside window
----B: duplicate packet, sending ACK 3
----A: uncorrupted ACK 2 is received
----A: duplicate ACK for packet before window, ignoring
----B: packet 4 is not corrupted
----B: packet 4 outside window
----B: duplicate packet, sending ACK 4
Sending packet 5 to layer 3
----A: uncorrupted ACK 3 is received
----A: duplicate ACK for packet before window, ignoring
----B: packet 5 is not corrupted
----B: packet 5 accepted and buffered
----B: delivered packet to layer 5, window moves to 6
----A: uncorrupted ACK 4 is received
----A: duplicate ACK received, do nothing!
----A: uncorrupted ACK 5 is received
----A: ACK 5 is new, marked as ACKED
----A: Window slides to 6
Warning: unable to cancel your timer. It wasn't running.
Sending packet 6 to layer 3
----B: packet 6 is not corrupted
----B: packet 6 accepted and buffered
----B: delivered packet to layer 5, window moves to 7
----A: uncorrupted ACK 6 is received
----A: ACK 6 is new, marked as ACKED
----A: Window slides to 7
Warning: unable to cancel your timer. It wasn't running.
Sending packet 7 to layer 3
----B: packet 7 is not corrupted
----B: packet 7 accepted and buffered
----B: delivered packet to layer 5, window moves to 8
----A: uncorrupted ACK 7 is received
----A: ACK 7 is new, marked as ACKED
----A: Window slides to 8
Warning: unable to cancel your timer. It wasn't running.
Sending packet 8 to layer 3
Sending packet 9 to layer 3
----B: packet 8 is not corrupted
----B: packet 8 accepted and buffered
----B: delivered packet to layer 5, window moves to 9
Sending packet 10 to layer 3
----A: uncorrupted ACK 8 is received
----A: ACK 8 is new, marked as ACKED
----A: Window slides to 9
Warning: unable to cancel your timer. It wasn't running.
----B: packet 9 is not corrupted
----B: packet 9 accepted and buffered
----B: delivered packet to layer 5, window moves to 10
----B: packet 10 is not corrupted
----B: packet 10 accepted and buffered
----B: delivered packet to layer 5, window moves to 11
----A: uncorrupted ACK 9 is received
----A: ACK 9 is new, marked as ACKED
----A: Window slides to 10
Sending packet 11 to layer 3
----B: packet 11 is not corrupted
----B: packet 11 accepted and buffered
----B: delivered packet to layer 5, window moves to 0
----A: uncorrupted ACK 10 is received
----A: ACK 10 is new, marked as ACKED
----A: Window slides to 11
Sending packet 0 to layer 3
----A: uncorrupted ACK 11 is received
----A: ACK 11 is new, marked as ACKED
----A: Window slides to 0
Sending packet 1 to layer 3
----B: packet 0 is not corrupted
----B: packet 0 accepted and buffered
----B: delivered packet to layer 5, window moves to 1
----B: packet 1 is not corrupted
----B: packet 1 accepted and buffered
----B: delivered packet to layer 5, window moves to 2
----A: uncorrupted ACK 0 is received
----A: ACK 0 is new, marked as ACKED
----A: Window slides to 1
----A: uncorrupted ACK 1 is received
----A: ACK 1 is new, marked as ACKED
----A: Window slides to 2
Sending packet 2 to layer 3
----B: packet 2 is not corrupted
----B: packet 2 accepted and buffered
----B: delivered packet to layer 5, window moves to 3
----A: uncorrupted ACK 2 is received
----A: ACK 2 is new, marked as ACKED
----A: Window slides to 3
Warning: unable to cancel your timer. It wasn't running.
Sending packet 3 to layer 3
Sending packet 4 to layer 3
----B: packet 3 is not corrupted
----B: packet 3 accepted and buffered
----B: delivered packet to layer 5, window moves to 4
----B: packet 4 is not corrupted
----B: packet 4 accepted and buffered
----B: delivered packet to layer 5, window moves to 5
----A: uncorrupted ACK 3 is received
----A: ACK 3 is new, marked as ACKED
----A: Window slides to 4
Warning: unable to cancel your timer. It wasn't running.
----A: uncorrupted ACK 4 is received
----A: ACK 4 is new, marked as ACKED
----A: Window slides to 5
Sending packet 5 to layer 3
----B: packet 5 is not corrupted
----B: packet 5 accepted and buffered
----B: delivered packet to layer 5, window moves to 6
----A: uncorrupted ACK 5 is received
----A: ACK 5 is new, marked as ACKED
----A: Window slides to 6
Warning: unable to cancel your timer. It wasn't running.
Sending packet 6 to layer 3
          TOLAYER3: packet being lost
Sending packet 7 to layer 3
          TOLAYER3: packet being lost
Sending packet 8 to layer 3
Sending packet 9 to layer 3
          TOLAYER3: packet being lost
----B: packet 8 is not corrupted
----B: packet 8 accepted and buffered
----A: uncorrupted ACK 8 is received
----A: ACK 8 is new, marked as ACKED
Warning: unable to cancel your timer. It wasn't running.
Sending packet 10 to layer 3
----B: packet 10 is not corrupted
----B: packet 10 accepted and buffered
----A: uncorrupted ACK 10 is received
----A: ACK 10 is new, marked as ACKED
Sending packet 11 to layer 3
          TOLAYER3: packet being lost
----A: time out,resend packets!
---A: resending packet 6 (retransmission 1)
---A: resending packet 7 (retransmission 1)
---A: resending packet 9 (retransmission 1)
---A: resending packet 11 (retransmission 1)
          TOLAYER3: packet being corrupted
----A: New message arrives, send window is full
----B: packet 6 is not corrupted
----B: packet 6 accepted and buffered
----B: delivered packet to layer 5, window moves to 7
----B: packet 7 is not corrupted
----B: packet 7 accepted and buffered
----B: delivered packet to layer 5, window moves to 8
----B: delivered packet to layer 5, window moves to 9
----A: uncorrupted ACK 6 is received
----A: ACK 6 is new, marked as ACKED
----A: Window slides to 7
----A: uncorrupted ACK 7 is received
----A: ACK 7 is new, marked as ACKED
----A: Window slides to 8
----A: Window slides to 9
Sending packet 0 to layer 3
----B: packet 9 is not corrupted
----B: packet 9 accepted and buffered
----B: delivered packet to layer 5, window moves to 10
----B: delivered packet to layer 5, window moves to 11
----B: packet 999999 is corrupted
Sending packet 1 to layer 3
----A: time out,resend packets!
---A: resending packet 9 (retransmission 2)
          TOLAYER3: packet being corrupted
---A: resending packet 11 (retransmission 2)
---A: resending packet 0 (retransmission 1)
---A: resending packet 1 (retransmission 1)
----A: uncorrupted ACK 9 is received
----A: ACK 9 is new, marked as ACKED
----A: Window slides to 10
----A: Window slides to 11
----B: packet 0 is not corrupted
----B: packet 0 accepted and buffered
Sending packet 2 to layer 3
----A: uncorrupted ACK 10 is received
----A: duplicate ACK received, do nothing!
----B: packet 1 is not corrupted
----B: packet 1 accepted and buffered
----A: uncorrupted ACK 0 is received
----A: ACK 0 is new, marked as ACKED
----A: uncorrupted ACK 1 is received
----A: ACK 1 is new, marked as ACKED
----B: packet 9 is corrupted
Sending packet 3 to layer 3
----B: packet 11 is not corrupted
----B: packet 11 accepted and buffered
----B: delivered packet to layer 5, window moves to 0
----B: delivered packet to layer 5, window moves to 1
----B: delivered packet to layer 5, window moves to 2
Sending packet 4 to layer 3
----A: uncorrupted ACK 10 is received
----A: ACK 10 is new, marked as ACKED
----B: packet 0 is not corrupted
----B: packet 0 outside window
----B: duplicate packet, sending ACK 0
----B: packet 1 is not corrupted
----B: packet 1 outside window
----B: duplicate packet, sending ACK 1
----A: uncorrupted ACK 11 is received
----A: ACK 11 is new, marked as ACKED
----A: Window slides to 0
----A: Window slides to 1
----A: Window slides to 2
----B: packet 2 is not corrupted
----B: packet 2 accepted and buffered
----B: delivered packet to layer 5, window moves to 3
----B: packet 3 is not corrupted
----B: packet 3 accepted and buffered
----B: delivered packet to layer 5, window moves to 4
----A: uncorrupted ACK 0 is received
----A: duplicate ACK for packet before window, ignoring
----A: uncorrupted ACK 1 is received
----A: duplicate ACK received, do nothing!
----B: packet 4 is not corrupted
----B: packet 4 accepted and buffered
----B: delivered packet to layer 5, window moves to 5
----A: time out,resend packets!
---A: resending packet 2 (retransmission 1)
---A: resending packet 3 (retransmission 1)
----B: packet 2 is not corrupted
----B: packet 2 outside window
----B: duplicate packet, sending ACK 2
----A: uncorrupted ACK 2 is received
----A: ACK 2 is new, marked as ACKED
----A: Window slides to 3
----B: packet 3 is not corrupted
----B: packet 3 outside window
----B: duplicate packet, sending ACK 3
----A: uncorrupted ACK 3 is received
----A: ACK 3 is new, marked as ACKED
----A: Window slides to 4
----A: Window slides to 5
----A: uncorrupted ACK 4 is received
----A: duplicate ACK received, do nothing!
----A: uncorrupted ACK 2 is received
----A: duplicate ACK for packet before window, ignoring
----A: uncorrupted ACK 3 is received
----A: duplicate ACK for packet before window, ignoring
 Simulator terminated at time 592.070007
 after attempting to send 50 msgs from layer5
number of messages dropped due to full window:  9 
number of valid (not corrupt or duplicate) acknowledgements received at A:  41 
(note: a single acknowledgement may have acknowledged more than one packet - if cumulative acknowledgements are used)
number of packet resends by A:  23 
number of correct packets received at B:  41 
number of messages delivered to application:  41 
