=== TEST: test7_ack_corruption ===
Number of messages: 10
Loss probability: 0.0
Corruption probability: 0.3
Direction (0=A->B, 1=A<-B, 2=both): 1
Average message interval: 10.0
Trace level: 2
===============================

-----  Stop and Wait Network Simulator Version 1.1 -------- 

Enter the number of messages to simulate: Enter  packet loss probability [enter 0.0 for no loss]:Enter packet corruption probability [0.0 for no corruption]:If you want loss or corruption to only occur in one direction, choose the direction: 0 A->B, 1 A<-B, 2 A<->B (both directions) :Enter average time between messages from sender's layer5 [ > 0.0]:Enter TRACE:
EVENT time: 6.965711,  type: 1, fromlayer5  entity: 0
----A: New message arrives, send window is not full, send new messge to layer3!
Sending packet 0 to layer 3
          START TIMER: starting timer at 6.965711

EVENT time: 12.374607,  type: 2, fromlayer3  entity: 1
----B: packet 0 is correctly received, send ACK!
          TOLAYER3: packet being corrupted

EVENT time: 17.132755,  type: 2, fromlayer3  entity: 0
----A: corrupted ACK is received, do nothing!

EVENT time: 19.661861,  type: 1, fromlayer5  entity: 0
----A: New message arrives, send window is not full, send new messge to layer3!
Sending packet 1 to layer 3

EVENT time: 22.965710,  type: 0, timerinterrupt   entity: 0
----A: time out,resend packets!
---A: resending packet 0
          START TIMER: starting timer at 22.965710
---A: resending packet 1

EVENT time: 27.956409,  type: 2, fromlayer3  entity: 1
----B: packet 1 is correctly received, send ACK!

EVENT time: 35.720585,  type: 1, fromlayer5  entity: 0
----A: New message arrives, send window is not full, send new messge to layer3!
Sending packet 2 to layer 3

EVENT time: 36.258339,  type: 2, fromlayer3  entity: 1
----B: packet corrupted or not expected sequence number, resend ACK!

EVENT time: 36.922195,  type: 2, fromlayer3  entity: 0
----A: uncorrupted ACK 1 is received
----A: ACK 1 is not a duplicate

EVENT time: 38.965710,  type: 0, timerinterrupt   entity: 0
----A: time out,resend packets!
---A: resending packet 0
          START TIMER: starting timer at 38.965710
---A: resending packet 2

EVENT time: 42.765144,  type: 2, fromlayer3  entity: 0
----A: uncorrupted ACK 1 is received
----A: ACK 1 is not a duplicate

EVENT time: 46.046768,  type: 2, fromlayer3  entity: 1
----B: packet corrupted or not expected sequence number, resend ACK!

EVENT time: 47.060474,  type: 2, fromlayer3  entity: 1
----B: packet 2 is correctly received, send ACK!

EVENT time: 47.070663,  type: 2, fromlayer3  entity: 0
----A: uncorrupted ACK 1 is received
----A: ACK 1 is not a duplicate

EVENT time: 47.208618,  type: 1, fromlayer5  entity: 0
----A: New message arrives, send window is not full, send new messge to layer3!
Sending packet 3 to layer 3

EVENT time: 54.965710,  type: 0, timerinterrupt   entity: 0
----A: time out,resend packets!
---A: resending packet 0
          START TIMER: starting timer at 54.965710
---A: resending packet 2
---A: resending packet 3

EVENT time: 55.209293,  type: 2, fromlayer3  entity: 1
----B: packet corrupted or not expected sequence number, resend ACK!

EVENT time: 55.537739,  type: 2, fromlayer3  entity: 0
----A: uncorrupted ACK 2 is received
----A: ACK 2 is not a duplicate

EVENT time: 59.078976,  type: 1, fromlayer5  entity: 0
----A: New message arrives, send window is not full, send new messge to layer3!
Sending packet 4 to layer 3

EVENT time: 61.161087,  type: 2, fromlayer3  entity: 1
----B: packet corrupted or not expected sequence number, resend ACK!
          TOLAYER3: packet being corrupted

EVENT time: 65.208351,  type: 2, fromlayer3  entity: 0
----A: uncorrupted ACK 2 is received
----A: ACK 2 is not a duplicate

EVENT time: 65.580582,  type: 2, fromlayer3  entity: 1
----B: packet 3 is correctly received, send ACK!

EVENT time: 68.848259,  type: 2, fromlayer3  entity: 1
----B: packet corrupted or not expected sequence number, resend ACK!

EVENT time: 70.194565,  type: 2, fromlayer3  entity: 0
----A: corrupted ACK is received, do nothing!

EVENT time: 70.207977,  type: 2, fromlayer3  entity: 1
----B: packet corrupted or not expected sequence number, resend ACK!
          TOLAYER3: packet being corrupted

EVENT time: 70.842049,  type: 1, fromlayer5  entity: 0
----A: New message arrives, send window is not full, send new messge to layer3!
Sending packet 5 to layer 3

EVENT time: 70.965714,  type: 0, timerinterrupt   entity: 0
----A: time out,resend packets!
---A: resending packet 0
          START TIMER: starting timer at 70.965714
---A: resending packet 3
---A: resending packet 4
---A: resending packet 5

EVENT time: 71.348709,  type: 2, fromlayer3  entity: 0
----A: uncorrupted ACK 3 is received
----A: ACK 3 is not a duplicate

EVENT time: 75.731720,  type: 2, fromlayer3  entity: 0
----A: uncorrupted ACK 3 is received
----A: ACK 3 is not a duplicate

EVENT time: 77.232643,  type: 1, fromlayer5  entity: 0
----A: New message arrives, send window is full

EVENT time: 77.514931,  type: 2, fromlayer3  entity: 1
----B: packet corrupted or not expected sequence number, resend ACK!
          TOLAYER3: packet being corrupted

EVENT time: 81.622437,  type: 2, fromlayer3  entity: 0
----A: corrupted ACK is received, do nothing!

EVENT time: 82.371964,  type: 2, fromlayer3  entity: 1
----B: packet 4 is correctly received, send ACK!

EVENT time: 84.314407,  type: 2, fromlayer3  entity: 1
----B: packet 5 is correctly received, send ACK!
          TOLAYER3: packet being corrupted

EVENT time: 86.965714,  type: 0, timerinterrupt   entity: 0
----A: time out,resend packets!
---A: resending packet 0
          START TIMER: starting timer at 86.965714
---A: resending packet 4
---A: resending packet 5

EVENT time: 90.188187,  type: 2, fromlayer3  entity: 1
----B: packet corrupted or not expected sequence number, resend ACK!

EVENT time: 90.215836,  type: 2, fromlayer3  entity: 0
----A: corrupted ACK is received, do nothing!

EVENT time: 92.447983,  type: 2, fromlayer3  entity: 0
----A: uncorrupted ACK 4 is received
----A: ACK 4 is not a duplicate

EVENT time: 94.008514,  type: 2, fromlayer3  entity: 1
----B: packet corrupted or not expected sequence number, resend ACK!
          TOLAYER3: packet being corrupted

EVENT time: 95.754379,  type: 1, fromlayer5  entity: 0
----A: New message arrives, send window is full

EVENT time: 102.396591,  type: 2, fromlayer3  entity: 0
----A: corrupted ACK is received, do nothing!

EVENT time: 102.965714,  type: 0, timerinterrupt   entity: 0
----A: time out,resend packets!
---A: resending packet 0
          START TIMER: starting timer at 102.965714
---A: resending packet 5

EVENT time: 103.777779,  type: 2, fromlayer3  entity: 1
----B: packet corrupted or not expected sequence number, resend ACK!

EVENT time: 105.658218,  type: 2, fromlayer3  entity: 0
----A: uncorrupted ACK 5 is received
----A: ACK 5 is not a duplicate

EVENT time: 107.786278,  type: 1, fromlayer5  entity: 0
----A: New message arrives, send window is full

EVENT time: 108.073006,  type: 1, fromlayer5  entity: 0
----A: New message arrives, send window is full

EVENT time: 108.249161,  type: 2, fromlayer3  entity: 1
----B: packet corrupted or not expected sequence number, resend ACK!

EVENT time: 112.424324,  type: 2, fromlayer3  entity: 1
----B: packet corrupted or not expected sequence number, resend ACK!

EVENT time: 113.312920,  type: 2, fromlayer3  entity: 0
----A: corrupted ACK is received, do nothing!

EVENT time: 117.443871,  type: 2, fromlayer3  entity: 0
----A: uncorrupted ACK 5 is received
----A: ACK 5 is not a duplicate

EVENT time: 118.965714,  type: 0, timerinterrupt   entity: 0
----A: time out,resend packets!
---A: resending packet 0
          START TIMER: starting timer at 118.965714

EVENT time: 120.300224,  type: 2, fromlayer3  entity: 1
----B: packet corrupted or not expected sequence number, resend ACK!

EVENT time: 122.070168,  type: 2, fromlayer3  entity: 1
----B: packet corrupted or not expected sequence number, resend ACK!

EVENT time: 123.156914,  type: 2, fromlayer3  entity: 1
----B: packet corrupted or not expected sequence number, resend ACK!

EVENT time: 123.574844,  type: 2, fromlayer3  entity: 0
----A: uncorrupted ACK 5 is received
----A: ACK 5 is not a duplicate

EVENT time: 127.096016,  type: 1, fromlayer5  entity: 0

EVENT time: 127.418533,  type: 2, fromlayer3  entity: 1
----B: packet corrupted or not expected sequence number, resend ACK!

EVENT time: 130.098404,  type: 2, fromlayer3  entity: 0
----A: uncorrupted ACK 5 is received
----A: ACK 5 is not a duplicate

EVENT time: 134.965714,  type: 0, timerinterrupt   entity: 0
----A: time out,resend packets!
---A: resending packet 0
          START TIMER: starting timer at 134.965714

EVENT time: 136.796860,  type: 2, fromlayer3  entity: 0
----A: uncorrupted ACK 5 is received
----A: ACK 5 is not a duplicate

EVENT time: 136.894379,  type: 2, fromlayer3  entity: 1
----B: packet corrupted or not expected sequence number, resend ACK!
          TOLAYER3: packet being corrupted

EVENT time: 140.286133,  type: 2, fromlayer3  entity: 0
----A: uncorrupted ACK 5 is received
----A: ACK 5 is not a duplicate

EVENT time: 146.564468,  type: 2, fromlayer3  entity: 1
----B: packet corrupted or not expected sequence number, resend ACK!
          TOLAYER3: packet being corrupted

EVENT time: 148.190170,  type: 2, fromlayer3  entity: 0
----A: uncorrupted ACK 5 is received
----A: ACK 5 is not a duplicate

EVENT time: 150.129257,  type: 2, fromlayer3  entity: 0
----A: uncorrupted ACK 5 is received
----A: ACK 5 is not a duplicate

EVENT time: 150.965714,  type: 0, timerinterrupt   entity: 0
----A: time out,resend packets!
---A: resending packet 0
          START TIMER: starting timer at 150.965714

EVENT time: 156.101959,  type: 2, fromlayer3  entity: 0
----A: corrupted ACK is received, do nothing!

EVENT time: 158.268082,  type: 2, fromlayer3  entity: 1
----B: packet corrupted or not expected sequence number, resend ACK!
          TOLAYER3: packet being corrupted

EVENT time: 158.522171,  type: 2, fromlayer3  entity: 0
----A: corrupted ACK is received, do nothing!

EVENT time: 161.508926,  type: 2, fromlayer3  entity: 0
----A: corrupted ACK is received, do nothing!

EVENT time: 166.965714,  type: 0, timerinterrupt   entity: 0
----A: time out,resend packets!
---A: resending packet 0
          START TIMER: starting timer at 166.965714

EVENT time: 168.472412,  type: 2, fromlayer3  entity: 1
----B: packet corrupted or not expected sequence number, resend ACK!

EVENT time: 172.178238,  type: 2, fromlayer3  entity: 0
----A: uncorrupted ACK 5 is received
----A: ACK 5 is not a duplicate

EVENT time: 182.965714,  type: 0, timerinterrupt   entity: 0
----A: time out,resend packets!
---A: packet 0 reached max retransmissions, marking as ACKED
 Simulator terminated at time 182.965714
 after attempting to send 10 msgs from layer5
number of messages dropped due to full window:  4 
number of valid (not corrupt or duplicate) acknowledgements received at A:  5 
(note: a single acknowledgement may have acknowledged more than one packet - if cumulative acknowledgements are used)
number of packet resends by A:  20 
number of correct packets received at B:  6 
number of messages delivered to application:  6 
