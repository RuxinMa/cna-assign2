=== TEST: test8_bidirectional ===
Number of messages: 10
Loss probability: 0.2
Corruption probability: 0.2
Direction (0=A->B, 1=A<-B, 2=both): 2
Average message interval: 10.0
Trace level: 2
===============================

-----  Stop and Wait Network Simulator Version 1.1 -------- 

Enter the number of messages to simulate: Enter  packet loss probability [enter 0.0 for no loss]:Enter packet corruption probability [0.0 for no corruption]:If you want loss or corruption to only occur in one direction, choose the direction: 0 A->B, 1 A<-B, 2 A<->B (both directions) :Enter average time between messages from sender's layer5 [ > 0.0]:Enter TRACE:
EVENT time: 6.965711,  type: 1, fromlayer5  entity: 0
----A: New message arrives, send window is not full, send new messge to layer3!
Sending packet 0 to layer 3

EVENT time: 12.374607,  type: 2, fromlayer3  entity: 1
----B: packet 0 is not corrupted
----B: packet 0 accepted and buffered
----B: delivered packet to layer 5, window moves to 1
          TOLAYER3: packet being corrupted

EVENT time: 17.132755,  type: 2, fromlayer3  entity: 0
----A: corrupted ACK is received, do nothing!

EVENT time: 19.661861,  type: 1, fromlayer5  entity: 0
----A: New message arrives, send window is not full, send new messge to layer3!
Sending packet 1 to layer 3
          TOLAYER3: packet being corrupted

EVENT time: 27.956409,  type: 2, fromlayer3  entity: 1
----B: packet 1 is corrupted

EVENT time: 35.720585,  type: 1, fromlayer5  entity: 0
----A: New message arrives, send window is not full, send new messge to layer3!
Sending packet 2 to layer 3

EVENT time: 36.875278,  type: 2, fromlayer3  entity: 1
----B: packet 2 is not corrupted
----B: packet 2 accepted and buffered

EVENT time: 37.509491,  type: 2, fromlayer3  entity: 0
----A: uncorrupted ACK 0 is received
----A: ACK 0 is new, marked as ACKED
----A: Window slides to 1
          STOP TIMER: stopping timer at 37.509491
Warning: unable to cancel your timer. It wasn't running.
          START TIMER: starting timer at 37.509491

EVENT time: 43.679108,  type: 2, fromlayer3  entity: 0
----A: uncorrupted ACK 2 is received
----A: ACK 2 is new, marked as ACKED
          STOP TIMER: stopping timer at 43.679108
          START TIMER: starting timer at 43.679108

EVENT time: 55.250427,  type: 1, fromlayer5  entity: 0
----A: New message arrives, send window is not full, send new messge to layer3!
Sending packet 3 to layer 3

EVENT time: 55.280880,  type: 1, fromlayer5  entity: 0
----A: New message arrives, send window is not full, send new messge to layer3!
Sending packet 4 to layer 3
          TOLAYER3: packet being corrupted

EVENT time: 59.679108,  type: 0, timerinterrupt   entity: 0
----A: time out,resend packets!
---A: resending packet 1 (retransmission 1)
---A: resending packet 3 (retransmission 1)
          TOLAYER3: packet being lost
---A: resending packet 4 (retransmission 1)
          START TIMER: starting timer at 59.679108

EVENT time: 62.767643,  type: 2, fromlayer3  entity: 1
----B: packet 3 is not corrupted
----B: packet 3 accepted and buffered

EVENT time: 69.109306,  type: 2, fromlayer3  entity: 0
----A: uncorrupted ACK 3 is received
----A: ACK 3 is new, marked as ACKED
          STOP TIMER: stopping timer at 69.109306
          START TIMER: starting timer at 69.109306

EVENT time: 70.916466,  type: 2, fromlayer3  entity: 1
----B: packet 4 is corrupted
          TOLAYER3: packet being corrupted

EVENT time: 73.737671,  type: 2, fromlayer3  entity: 1
----B: packet 1 is not corrupted
----B: packet 1 accepted and buffered
----B: delivered packet to layer 5, window moves to 2
----B: delivered packet to layer 5, window moves to 3
----B: delivered packet to layer 5, window moves to 4
          TOLAYER3: packet being corrupted

EVENT time: 74.060738,  type: 1, fromlayer5  entity: 0
----A: New message arrives, send window is not full, send new messge to layer3!
Sending packet 5 to layer 3
          TOLAYER3: packet being corrupted

EVENT time: 78.404564,  type: 2, fromlayer3  entity: 0
----A: corrupted ACK is received, do nothing!

EVENT time: 80.418068,  type: 2, fromlayer3  entity: 1
----B: packet 4 is not corrupted
----B: packet 4 accepted and buffered
----B: delivered packet to layer 5, window moves to 5
          TOLAYER3: packet being corrupted

EVENT time: 82.059433,  type: 1, fromlayer5  entity: 0
----A: New message arrives, send window is not full, send new messge to layer3!
Sending packet 6 to layer 3
          TOLAYER3: packet being corrupted

EVENT time: 85.109306,  type: 0, timerinterrupt   entity: 0
----A: time out,resend packets!
---A: resending packet 1 (retransmission 2)
          TOLAYER3: packet being lost
---A: resending packet 4 (retransmission 2)
          TOLAYER3: packet being lost
---A: resending packet 5 (retransmission 1)
---A: resending packet 6 (retransmission 1)
          START TIMER: starting timer at 85.109306

EVENT time: 85.418686,  type: 2, fromlayer3  entity: 0
----A: corrupted ACK is received, do nothing!

EVENT time: 89.346054,  type: 2, fromlayer3  entity: 1
----B: packet 5 is corrupted
          TOLAYER3: packet being lost

EVENT time: 91.712067,  type: 2, fromlayer3  entity: 0
----A: corrupted ACK is received, do nothing!

EVENT time: 94.332268,  type: 2, fromlayer3  entity: 1
----B: packet 6 is corrupted

EVENT time: 98.000771,  type: 1, fromlayer5  entity: 0
----A: New message arrives, send window is full

EVENT time: 98.208038,  type: 2, fromlayer3  entity: 0
----A: uncorrupted ACK 4 is received
----A: ACK 4 is new, marked as ACKED
          STOP TIMER: stopping timer at 98.208038
          START TIMER: starting timer at 98.208038

EVENT time: 100.095093,  type: 1, fromlayer5  entity: 0
----A: New message arrives, send window is full

EVENT time: 101.280708,  type: 2, fromlayer3  entity: 1
----B: packet 5 is not corrupted
----B: packet 5 accepted and buffered
----B: delivered packet to layer 5, window moves to 6
          TOLAYER3: packet being lost

EVENT time: 108.467529,  type: 2, fromlayer3  entity: 1
----B: packet 6 is not corrupted
----B: packet 6 accepted and buffered
----B: delivered packet to layer 5, window moves to 7

EVENT time: 114.137337,  type: 2, fromlayer3  entity: 0
----A: uncorrupted ACK 6 is received
----A: ACK 6 is new, marked as ACKED
          STOP TIMER: stopping timer at 114.137337
          START TIMER: starting timer at 114.137337

EVENT time: 119.406219,  type: 1, fromlayer5  entity: 0
----A: New message arrives, send window is full

EVENT time: 125.673615,  type: 1, fromlayer5  entity: 0

EVENT time: 130.137329,  type: 0, timerinterrupt   entity: 0
----A: time out,resend packets!
---A: resending packet 1 (retransmission 3)
---A: resending packet 5 (retransmission 2)
          TOLAYER3: packet being lost
          START TIMER: starting timer at 130.137329

EVENT time: 134.049850,  type: 2, fromlayer3  entity: 1
----B: packet 1 is not corrupted
----B: packet 1 outside window
----B: duplicate packet, sending ACK 1

EVENT time: 138.521240,  type: 2, fromlayer3  entity: 0
----A: uncorrupted ACK 1 is received
----A: ACK 1 is new, marked as ACKED
----A: Window slides to 2
----A: Window slides to 3
----A: Window slides to 4
----A: Window slides to 5
          STOP TIMER: stopping timer at 138.521240
          START TIMER: starting timer at 138.521240

EVENT time: 154.521240,  type: 0, timerinterrupt   entity: 0
----A: time out,resend packets!
---A: resending packet 5 (retransmission 3)
          START TIMER: starting timer at 154.521240

EVENT time: 162.215866,  type: 2, fromlayer3  entity: 1
----B: packet 5 is not corrupted
----B: packet 5 outside window
----B: duplicate packet, sending ACK 5
          TOLAYER3: packet being corrupted

EVENT time: 165.168289,  type: 2, fromlayer3  entity: 0
----A: corrupted ACK is received, do nothing!

EVENT time: 170.521240,  type: 0, timerinterrupt   entity: 0
----A: time out,resend packets!
---A: resending packet 5 (retransmission 4)
          START TIMER: starting timer at 170.521240

EVENT time: 177.743103,  type: 2, fromlayer3  entity: 1
----B: packet 5 is not corrupted
----B: packet 5 outside window
----B: duplicate packet, sending ACK 5
          TOLAYER3: packet being lost

EVENT time: 186.521240,  type: 0, timerinterrupt   entity: 0
----A: time out,resend packets!
---A: resending packet 5 (retransmission 5)
          START TIMER: starting timer at 186.521240

EVENT time: 195.744431,  type: 2, fromlayer3  entity: 1
----B: packet 5 is not corrupted
----B: packet 5 outside window
----B: duplicate packet, sending ACK 5

EVENT time: 202.521240,  type: 0, timerinterrupt   entity: 0
----A: time out,resend packets!
---A: resending packet 5 (retransmission 6)
          TOLAYER3: packet being corrupted
          START TIMER: starting timer at 202.521240

EVENT time: 203.827240,  type: 2, fromlayer3  entity: 0
----A: uncorrupted ACK 5 is received
----A: ACK 5 is new, marked as ACKED
----A: Window slides to 6
----A: Window slides to 7
          STOP TIMER: stopping timer at 203.827240

EVENT time: 212.150192,  type: 2, fromlayer3  entity: 1
----B: packet 999999 is corrupted

EVENT time: 215.411819,  type: 2, fromlayer3  entity: 0
----A: uncorrupted ACK 6 is received
----A: duplicate ACK received, do nothing!
 Simulator terminated at time 215.411819
 after attempting to send 10 msgs from layer5
number of messages dropped due to full window:  3 
number of valid (not corrupt or duplicate) acknowledgements received at A:  7 
(note: a single acknowledgement may have acknowledged more than one packet - if cumulative acknowledgements are used)
number of packet resends by A:  13 
number of correct packets received at B:  7 
number of messages delivered to application:  7 
